<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Report Cover Page Creator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
        }

        .content {
            margin-top: 50px;
        }

        .form-container {
            background-color: #fff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.1);
        }

        .form-title {
            text-align: center;
            margin-bottom: 30px;
        }

        .form-label {
            font-weight: 600;
        }

        .btn-submit {
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            transition: all 0.3s ease;
        }

        .btn-submit:hover {
            background-color: #0056b3;
        }

        .oketable {
            margin-top: 300px;
        }
    </style>
</head>

<body>
    <div class="content" id="content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="form-container">
                        <h2 class="form-title">Lab Report Cover Page Creator. <br> <span class="h5">By <span
                                    class="text-primary"><a href="https://duckist.pp.ua" class="text-decoration-none"
                                        role="button">Md Musfiqur Rahman Jehad</a></span>(TE-13)</span></h2>
                        <h5 class="text-center"></h5>
                        <form>
                            <div class="mb-3">
                                <label for="subname" class="form-label">Subject Name</label>
                                <input type="text" class="form-control" id="subname" name="subname" required>
                            </div>
                            <div class="mb-3">
                                <label for="subcode" class="form-label">Subject Code</label>
                                <input type="text" class="form-control" id="subcode" name="subcode" required>
                            </div>
                            <div class="mb-3">
                                <label for="student" class="form-label">Student Name</label>
                                <input type="text" class="form-control" id="student" name="student" required>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="duroll" class="form-label">DU Roll</label>
                                    <input type="text" class="form-control" id="duroll" name="duroll" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="dureg" class="form-label">DU Registration</label>
                                    <input type="text" class="form-control" id="dureg" name="dureg" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="stdid" class="form-label">Student ID</label>
                                <input type="text" class="form-control" id="stdid" name="stdid" required>
                            </div>
                            <div class="mb-3">
                                <label for="profname" class="form-label">Professor Name</label>
                                <input type="text" class="form-control" id="profname" name="profname" required>
                            </div>
                            <div class="mb-3">
                                <label for="profpost" class="form-label">Professor Post</label>
                                <select class="form-select" id="profpost" name="profpost" required>
                                    <option value="">Select Professor Post</option>
                                    <option value="Assistant Professor">Assistant Professor</option>
                                    <option value="Lecturer">Lecturer</option>
                                </select>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="level" class="form-label">Level</label>
                                    <select class="form-select" id="level" name="level" required>
                                        <option value="">Select Level</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="term" class="form-label">Term</label>
                                    <select class="form-select" id="term" name="term" required>
                                        <option value="">Select Term</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="dept" class="form-label">Department</label>
                                <select class="form-select" id="dept" name="dept" required>
                                    <option value="">Select Department</option>
                                    <option value="Textile Engineering">Textile Engineering</option>
                                    <option value="Computer Science And Engineering">Computer Science And Engineering
                                    </option>
                                    <option value="Electrical and Electronics Engineering">Electrical and Electronics
                                        Engineering</option>
                                    <option value="Fashion Design & Apparel Engineering">Fashion Design & Apparel
                                        Engineering</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-submit" onclick="reportedit()">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="reportcontent" id="reportcontent">
        <div class="text-center col-md-6 mx-auto m-5">
            <button class="btn btn-lg btn-success m-2 p-2 col-md-3" onclick="showdownloadalert()">Download</button>
            <button class="btn btn-lg m-2 p-2 border col-md-3" onclick="submitanotherform()">Create Another</button>
        </div>
        <div class="col-md-8 mx-auto border border-2 p-2 m-2 rounded-2 shadow">
            <div class="container" id="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="text-center mb-5">
                            <img src="assets/img/stec%20(2).png" width="139" height="143">
                            <h3 class="mt-2">SHYAMOLI TEXTILE ENGINEERING COLLEGE</h3>
                            <span class="text-info" class="mb-2">(A constituent college of University of Dhaka)</span>
                            <p class="fs-3" class="mt-2">Dept. Of <span class="dept"></span><br>Level -<span
                                    class="level"></span>, Term
                                -<span class="term"></span><br>Report on<br><span class="subname"></span><br>Subject
                                Code:<span class="subcode"></span>
                            </p>
                        </div>
                        <div class="table-container oketable border p-2 rounded-2 mb-5">
                            <div class="row bg-transparent border-0 border-bottom-0">
                                <div class="col border-end">
                                    <p class="fs-4 border-bottom">Submitted by</p>
                                    <p class="fs-5">NAME: <span class="text-uppercase"><span
                                                class="studentname"></span></span><br>ID:
                                        <span class="stdid"></span><br>DU Reg: <span class="dureg"></span><br>DU Roll:
                                        <span class="duroll"></span>
                                    </p>
                                </div>
                                <div class="col">
                                    <p class="fs-4 border-bottom">Submitted to</p>
                                    <p class="fs-5">NAME: <span class="text-uppercase"><span
                                                class="profname"></span></span><br><span class="text-uppercase"><span
                                                class="profpost"></span></span><br>SHYAMOLI TEXTILE
                                        ENGINEERING COLLEGE</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Updated script -->
    <script>
        function submitanotherform() {
            window.location.reload();
        }

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Function to show SweetAlert success message with download button
        function showdownloadalert() {
            var filenameno = "DUCKIST" + getRandomInt(0, 9999);
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: 'Report is ready to download.',
                showDenyButton: true,
                confirmButtonText: 'Download',
                denyButtonText: 'Close',
            }).then((result) => {
                if (result.isConfirmed) {
                    // Delaying PDF generation to ensure content rendering
                    setTimeout(() => {
                        const invoice = document.getElementById("container");
                        var opt = {
                            margin: 0.3,
                            filename: 'labreportcover-' + filenameno + '.pdf',
                            image: { type: 'jpeg', quality: 0.98 },
                            html2canvas: { scale: 1 },
                            jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
                        };
                        html2pdf().from(invoice).set(opt).save();
                    }, 500); // Delay for 500 milliseconds
                }
            });
        }

        // Function to show SweetAlert notification
        function showCreatingAlert() {
            Swal.fire({
                title: 'Creating...',
                text: 'Please wait while the report is being created.',
                allowOutsideClick: false,
                allowEscapeKey: false,
                showConfirmButton: false,
                timer: 2000,
                willOpen: () => {
                    Swal.showLoading();
                }
            }).then(() => {
                // Show reportcontent
                document.getElementById("reportcontent").style.display = "block";
                document.getElementById("content").style.display = "none";
            });
        }

        // Function to hide the reportcontent initially
        window.onload = function () {
            document.getElementById("reportcontent").style.display = "none";
        }

        // Function to show reportcontent and generate PDF on form submission
        function reportedit() {
            // Get form values
            var subject = document.getElementById("subname").value;
            var subcode = document.getElementById("subcode").value;
            var student = document.getElementById("student").value;
            var duroll = document.getElementById("duroll").value;
            var dureg = document.getElementById("dureg").value;
            var stdid = document.getElementById("stdid").value;
            var profname = document.getElementById("profname").value;
            var profpost = document.getElementById("profpost").value;
            var level = document.getElementById("level").value;
            var term = document.getElementById("term").value;
            var dept = document.getElementById("dept").value;

            // Check if any required field is empty
            if (!subject || !subcode || !student || !duroll || !dureg || !stdid || !profname || !profpost || !level || !term || !dept) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Please fill in all required fields!',
                });
                return; // Prevent form submission
            }

            // Set values in reportcontent
            document.querySelector(".dept").innerText = dept;
            document.querySelector(".level").innerText = level;
            document.querySelector(".term").innerText = term;
            document.querySelector(".subname").innerText = subject;
            document.querySelector(".subcode").innerText = subcode;
            document.querySelector(".studentname").innerText = student;
            document.querySelector(".stdid").innerText = stdid;
            document.querySelector(".dureg").innerText = dureg;
            document.querySelector(".duroll").innerText = duroll;
            document.querySelector(".profname").innerText = profname;
            document.querySelector(".profpost").innerText = profpost;

            // Show SweetAlert notification
            showCreatingAlert();
        }
    </script>

</body>

</html>